{% extends "new/layout.html" %}
{% block content %}
<div class="container-fluid">
    <div id="search" class="page">
        {% include 'new/discovery.html' %}
    </div>
    <div id="transfer" class="page" style="display: none;">
        {% include 'new/transfer.html' %}
    </div>
    <div id="library" class="page" style="display: none;">
        {% include 'new/library.html' %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-pills .nav-link');

        function showPage(pageId) {
            pages.forEach(page => {
                page.style.display = page.id === pageId ? 'block' : 'none';
            });
            navLinks.forEach(link => {
                if (link.getAttribute('data-page') === pageId) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            // Dispatch a custom event to notify the page that it is being shown
            const event = new CustomEvent('showPage', { detail: { pageId: pageId } });
            document.body.dispatchEvent(event);
        }

        navLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                const pageId = this.getAttribute('data-page');
                if (pageId && document.getElementById(pageId)) {
                    event.preventDefault();
                    showPage(pageId);
                }
            });
        });

        // Show the initial page
        showPage('search');
    });
</script>
{% endblock %}